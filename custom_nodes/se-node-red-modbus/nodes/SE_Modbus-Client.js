var _0x550c=['serial\x20sending\x20and\x20wait','push','callModbus','msg','queue\x20check\x20is\x20not\x20a\x20unit','empty','dequeueCommand','getMachineState','indexOf','dequeue\x20command\x20disallowed\x20state','dequeue\x20command\x20','checkQueuesAreEmpty','\x20TCP@','\x20Serial@','serialPort','settings','verbose','warn','Client\x20->\x20','onINIT','initQueue','connectClient','reconnect\x20in\x20','\x20ms','event:\x20','emit','mbinit','onCONNECTED','\x20old:\x20','\x20new:\x20','mbconnected','activate','onACTIVATED','queue','onQUEUEING','mbqueue','onOPENED','mbclosed','onFAILED','mberror','onBROKEN','mbbroken','close','connection\x20closed','error','wrong\x20unit-id\x20(0..255)','failure','C701','then','setTCPConnected','catch','modbusErrorHandling','TELNET','Telnet\x20port','connectTelnet','setTCPConnectionOptions','TPC-RTU-BUFFERED','TCP\x20RTU\x20buffered\x20port','TCP\x20port','wrong\x20unit-id\x20serial\x20(1..247)','serialConnectionDelay','ASCII','ASCII\x20port\x20serial','connectAsciiSerial','setSerialConnectionOptions','RTU\x20buffered\x20port\x20serial','connectRTUBuffered','setTimeout','connect','modbusDebugLog','modbus\x20tcp\x20connected\x20on\x20','openserial','openSerialClient','message','File\x20not\x20found','connect\x20ECONNREFUSED','Access\x20denied','COM\x20Port\x20in\x20use','networkErrors','errno','OPENED','time\x20to\x20open\x20Unit\x20','_port','onModbusClose','wrong\x20state\x20on\x20connect\x20serial\x20','modbus\x20connection\x20not\x20opened\x20state\x20is\x20%s','modbus\x20closed\x20port','getQueueNumber','pushToQueueByUnitId','payload','queueUnit','push\x20to\x20Queue\x20by\x20Unit-Id','push\x20to\x20Queue\x20by\x20default\x20Unit-Id','queueNumber','readModbus','queue\x20read\x20msg','read','read\x20msg','getTimeout','readCoils','address','activateSending','readDiscreteInputs','quantity','readHoldingRegisters','Function\x20Code\x20Unknown','Function\x20Code\x20Unknown\x20%s','writeModbus','queue\x20write\x20msg','write','setUnitIdFromPayload','Quantity\x20should\x20be\x20less\x20or\x20equal\x20to\x20coil\x20payload\x20array\x20length:\x20','value','\x20Addr:\x20','\x20Q:\x20','writeCoils','writeCoil','Quantity\x20should\x20be\x20less\x20or\x20equal\x20to\x20register\x20payload\x20array\x20length:\x20','writeRegister','queue\x20response\x20activate\x20sending','setMaxListeners','init','reconnect','stop','registerType','SE_Modbus-Client','httpAdmin','/serialports','auth','needsPermission','serial.read','serialport','log','json','exports','../src/modbus-client-core','nodes','createNode','modbus-serial','clienttype','bufferCommands','stateLogEnabled','tcpHost','tcpPort','tcpType','serialBaudrate','serialDatabits','serialStopbits','serialParity','serialType','commandDelay','clientTimeout','reconnectTimeout','bufferCommandList','sendAllowed','unitSendingAllowed','messageAllowedStates','messagesAllowedStates','statlyMachine','createStatelyMachine','clear','set','checkUnitId','tcp','unitid','setID','queueUnitId','unit_id','client','isNaN','sequentialDequeueCommand','isInteger','get','length','stringify','queue\x20check'];(function(_0x18cafa,_0x5b10ef){var _0x5d17cd=function(_0x791c2b){while(--_0x791c2b){_0x18cafa['push'](_0x18cafa['shift']());}};_0x5d17cd(++_0x5b10ef);}(_0x550c,0x1e6));var _0x56ae=function(_0x2f9baa,_0x2e0027){_0x2f9baa=_0x2f9baa-0x0;var _0x49854b=_0x550c[_0x2f9baa];return _0x49854b;};module[_0x56ae('0x0')]=function(_0x34a12b){'use strict';let _0x36c6a6=require(_0x56ae('0x1'));function _0x3e4c21(_0x5c685e){_0x34a12b[_0x56ae('0x2')][_0x56ae('0x3')](this,_0x5c685e);let _0x292610=require(_0x56ae('0x4'));const _0x558098=0x0;const _0xd7aec1=0x1;const _0x230f38=0x1;const _0x948b6c=0x1f4;const _0x29929c=0x3e8;const _0x5dd881=0x7d0;this['clienttype']=_0x5c685e[_0x56ae('0x5')];this['bufferCommands']=_0x5c685e[_0x56ae('0x6')];this[_0x56ae('0x7')]=_0x5c685e[_0x56ae('0x7')];this[_0x56ae('0x8')]=_0x5c685e[_0x56ae('0x8')];this['tcpPort']=parseInt(_0x5c685e[_0x56ae('0x9')])||0x1f6;this[_0x56ae('0xa')]=_0x5c685e[_0x56ae('0xa')];this['serialPort']=_0x5c685e['serialPort'];this[_0x56ae('0xb')]=_0x5c685e['serialBaudrate'];this['serialDatabits']=_0x5c685e[_0x56ae('0xc')];this[_0x56ae('0xd')]=_0x5c685e[_0x56ae('0xd')];this[_0x56ae('0xe')]=_0x5c685e[_0x56ae('0xe')];this[_0x56ae('0xf')]=_0x5c685e['serialType'];this['serialConnectionDelay']=parseInt(_0x5c685e['serialConnectionDelay'])||_0x948b6c;this['commandDelay']=parseInt(_0x5c685e[_0x56ae('0x10')])||_0xd7aec1;this[_0x56ae('0x11')]=parseInt(_0x5c685e[_0x56ae('0x11')])||_0x29929c;this[_0x56ae('0x12')]=parseInt(_0x5c685e[_0x56ae('0x12')])||_0x5dd881;let _0x69aeb7=this;_0x69aeb7['client']=null;_0x69aeb7[_0x56ae('0x13')]=new Map();_0x69aeb7[_0x56ae('0x14')]=new Map();_0x69aeb7[_0x56ae('0x15')]=[];_0x69aeb7[_0x56ae('0x16')]=_0x36c6a6[_0x56ae('0x17')];if(_0x69aeb7[_0x56ae('0x6')]=='1'){_0x69aeb7['bufferCommands']=!![];}else{_0x69aeb7[_0x56ae('0x6')]=![];_0x69aeb7['bufferCommands']=!![];_0x69aeb7[_0x56ae('0x10')]=0x1;}_0x69aeb7['statlyMachine']=null;_0x69aeb7[_0x56ae('0x18')]=_0x36c6a6[_0x56ae('0x19')]();_0x69aeb7['initQueue']=function(){_0x69aeb7[_0x56ae('0x13')]['clear']();_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x1a')]();_0x69aeb7[_0x56ae('0x15')]=[];for(let _0x205fd6=0x0;_0x205fd6<=0xff;_0x205fd6++){_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x1b')](_0x205fd6,[]);_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x1b')](_0x205fd6,!![]);}};_0x69aeb7[_0x56ae('0x1c')]=function(_0x112016){if(_0x69aeb7[_0x56ae('0x5')]===_0x56ae('0x1d')){return _0x112016>=0x0&&_0x112016<=0xff;}else{return _0x112016>=0x1&&_0x112016<=0xf7;}};_0x69aeb7['setUnitIdFromPayload']=function(_0x2c3407){let _0x155cce=parseInt(_0x2c3407['payload'][_0x56ae('0x1e')]);if(Number['isInteger'](_0x155cce)){_0x69aeb7['client'][_0x56ae('0x1f')](_0x155cce);_0x2c3407[_0x56ae('0x20')]=_0x155cce;}else{if(!_0x69aeb7[_0x56ae('0x1c')](_0x69aeb7[_0x56ae('0x21')])){_0x69aeb7['unit_id']=_0x230f38;}_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x1f')](_0x69aeb7[_0x56ae('0x21')]);_0x2c3407[_0x56ae('0x20')]=_0x69aeb7[_0x56ae('0x21')];}};if(Number[_0x56ae('0x23')](_0x69aeb7[_0x56ae('0x21')])||!_0x69aeb7['checkUnitId'](_0x69aeb7['unit_id'])){_0x69aeb7[_0x56ae('0x21')]=_0x230f38;}_0x69aeb7[_0x56ae('0x24')]=function(){let _0x40c424=null;let _0x33161b=!![];let _0x526cf3=parseInt(_0x69aeb7[_0x56ae('0x15')]['shift']());if(Number[_0x56ae('0x25')](_0x526cf3)&&_0x69aeb7['bufferCommandList'][_0x56ae('0x26')](_0x526cf3)[_0x56ae('0x27')]>0x0){_0x316c8f(JSON[_0x56ae('0x28')]({'type':_0x56ae('0x29'),'unitid':_0x526cf3,'sendAllowed':_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x26')](_0x526cf3),'queueLength':_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x526cf3)['length']}));if(_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x26')](_0x526cf3)){_0x40c424=_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x526cf3)['shift']();if(_0x40c424){_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x1b')](_0x526cf3,![]);_0x316c8f(JSON[_0x56ae('0x28')]({'type':_0x56ae('0x2a'),'unitid':_0x526cf3,'commandData':_0x40c424,'queueLength':_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x526cf3)[_0x56ae('0x27')],'sendAllowedForNext':_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x26')](_0x526cf3),'delay':_0x69aeb7['commandDelay']}));if(_0x69aeb7[_0x56ae('0x13')]['get'](_0x526cf3)[_0x56ae('0x27')]>0x0){_0x69aeb7[_0x56ae('0x15')][_0x56ae('0x2b')](_0x526cf3);}_0x33161b=![];_0x40c424[_0x56ae('0x2c')](_0x40c424[_0x56ae('0x2d')],_0x40c424['cb'],_0x40c424['cberr']);}}}else{_0x316c8f(JSON[_0x56ae('0x28')]({'type':_0x56ae('0x2e'),'unitid':_0x526cf3}));}if(_0x33161b){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x2f')]();}};_0x69aeb7[_0x56ae('0x30')]=function(){let _0x409319=_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x31')]();if(_0x69aeb7['messageAllowedStates'][_0x56ae('0x32')](_0x409319)===-0x1){_0x316c8f(JSON['stringify']({'state':_0x409319,'message':_0x56ae('0x33'),'delay':_0x69aeb7[_0x56ae('0x10')]}));}else{_0x316c8f(JSON[_0x56ae('0x28')]({'state':_0x409319,'message':_0x56ae('0x34')+_0x69aeb7['clienttype'],'delay':_0x69aeb7[_0x56ae('0x10')]}));_0x69aeb7[_0x56ae('0x24')]();}if(_0x69aeb7[_0x56ae('0x35')]()){_0x69aeb7[_0x56ae('0x18')]['empty']();}};_0x69aeb7['checkQueuesAreEmpty']=function(){let _0x1e8694=!![];for(let _0x5640eb=0x0;_0x5640eb<=0xff;_0x5640eb++){_0x1e8694&=_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x5640eb)[_0x56ae('0x27')]>0x0;}return _0x1e8694;};let _0x1ef87a='';if(_0x69aeb7['clienttype']===_0x56ae('0x1d')){_0x1ef87a=_0x56ae('0x36')+_0x69aeb7[_0x56ae('0x8')]+':'+_0x69aeb7['tcpPort'];}else{_0x1ef87a=_0x56ae('0x37')+_0x69aeb7[_0x56ae('0x38')]+':'+_0x69aeb7[_0x56ae('0xb')]+'bit/s';}_0x1ef87a+='\x20default\x20Unit-Id:\x20'+_0x69aeb7[_0x56ae('0x21')];function _0x40d766(_0x5adda1){if(_0x34a12b[_0x56ae('0x39')][_0x56ae('0x3a')]){_0x69aeb7[_0x56ae('0x3b')](_0x56ae('0x3c')+_0x5adda1+_0x1ef87a);}}function _0x4b38d9(_0x5a594b){if(_0x34a12b[_0x56ae('0x39')][_0x56ae('0x3a')]){_0x36c6a6['debugLog'](_0x56ae('0x3c')+_0x5a594b+_0x1ef87a);}}function _0x1dec2e(_0x1459bb){if(_0x69aeb7['stateLogEnabled']){_0x4b38d9(_0x1459bb);}}function _0x316c8f(_0x2cfea9){if(_0x69aeb7[_0x56ae('0x6')]){_0x4b38d9(_0x2cfea9);}}_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x3d')]=function(_0xeaa5e5,_0x2881b3,_0x45a9b8){_0x69aeb7[_0x56ae('0x3e')]();setTimeout(_0x69aeb7[_0x56ae('0x3f')],_0x69aeb7[_0x56ae('0x12')]);_0x40d766(_0x56ae('0x40')+_0x69aeb7[_0x56ae('0x12')]+_0x56ae('0x41'));_0x4b38d9(_0x56ae('0x42')+_0xeaa5e5+'\x20old:\x20'+_0x2881b3+'\x20new:\x20'+_0x45a9b8);_0x69aeb7[_0x56ae('0x43')](_0x56ae('0x44'));};_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x45')]=function(_0x1a69dd,_0xc9a702,_0x10b040){_0x1dec2e(_0x56ae('0x42')+_0x1a69dd+_0x56ae('0x46')+_0xc9a702+_0x56ae('0x47')+_0x10b040);_0x69aeb7[_0x56ae('0x43')](_0x56ae('0x48'));_0x69aeb7['statlyMachine'][_0x56ae('0x49')]();};_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x4a')]=function(_0xfbd5ad,_0x2e8caf,_0xbe9d19){_0x1dec2e(_0x56ae('0x42')+_0xfbd5ad+_0x56ae('0x46')+_0x2e8caf+'\x20new:\x20'+_0xbe9d19);_0x69aeb7[_0x56ae('0x43')]('mbactive');if(_0x69aeb7[_0x56ae('0x6')]){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x4b')]();}};_0x69aeb7['statlyMachine'][_0x56ae('0x4c')]=function(_0x7f6eb1,_0x4774f4,_0x34aa5a){_0x1dec2e(_0x56ae('0x42')+_0x7f6eb1+_0x56ae('0x46')+_0x4774f4+_0x56ae('0x47')+_0x34aa5a);setTimeout(_0x69aeb7['dequeueCommand'],_0x69aeb7[_0x56ae('0x10')]);_0x69aeb7[_0x56ae('0x43')](_0x56ae('0x4d'));};_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x4e')]=function(_0x992c77,_0x6054ee,_0x19383e){_0x4b38d9(_0x56ae('0x42')+_0x992c77+'\x20old:\x20'+_0x6054ee+_0x56ae('0x47')+_0x19383e);_0x69aeb7[_0x56ae('0x43')]('mbopen');};_0x69aeb7['statlyMachine']['onCLOSED']=function(_0x1adfee,_0x4317e3,_0x37edaa){_0x1dec2e(_0x56ae('0x42')+_0x1adfee+_0x56ae('0x46')+_0x4317e3+_0x56ae('0x47')+_0x37edaa);_0x69aeb7[_0x56ae('0x43')](_0x56ae('0x4f'));_0x69aeb7['statlyMachine']['break']();};_0x69aeb7['statlyMachine'][_0x56ae('0x50')]=function(_0x204173,_0x14d602,_0x5bb3ed){_0x1dec2e(_0x56ae('0x42')+_0x204173+_0x56ae('0x46')+_0x14d602+'\x20new:\x20'+_0x5bb3ed);_0x69aeb7['emit'](_0x56ae('0x51'),'FSM\x20Reset\x20On\x20State\x20'+_0x14d602);_0x69aeb7[_0x56ae('0x18')]['break']();};_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x52')]=function(_0x439340,_0x53613a,_0x2f82da){_0x1dec2e(_0x56ae('0x42')+_0x439340+'\x20old:\x20'+_0x53613a+'\x20new:\x20'+_0x2f82da);_0x69aeb7[_0x56ae('0x43')](_0x56ae('0x53'));if(_0x69aeb7['reconnectTimeout']<=0x0){_0x69aeb7[_0x56ae('0x12')]=_0x5dd881;}_0x40d766('try\x20to\x20reconnect\x20by\x20init\x20in\x20'+_0x69aeb7[_0x56ae('0x12')]+'\x20ms');setTimeout(_0x69aeb7[_0x56ae('0x18')]['init'],_0x69aeb7['reconnectTimeout']);};_0x69aeb7['connectClient']=function(){if(_0x69aeb7[_0x56ae('0x22')]){try{_0x69aeb7['client'][_0x56ae('0x54')](function(){_0x4b38d9(_0x56ae('0x55'));});}catch(_0x3cfd00){_0x4b38d9(_0x3cfd00);}}_0x69aeb7[_0x56ae('0x22')]=null;_0x69aeb7[_0x56ae('0x22')]=new _0x292610();if(!_0x69aeb7[_0x56ae('0x11')]){_0x69aeb7[_0x56ae('0x11')]=_0x29929c;}if(!_0x69aeb7[_0x56ae('0x12')]){_0x69aeb7['reconnectTimeout']=_0x5dd881;}if(_0x69aeb7[_0x56ae('0x5')]===_0x56ae('0x1d')){if(!_0x69aeb7[_0x56ae('0x1c')](_0x69aeb7[_0x56ae('0x21')])){_0x69aeb7[_0x56ae('0x56')](_0x56ae('0x57'),{'payload':_0x69aeb7['unit_id']});_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]();return;}switch(_0x69aeb7['tcpType']){case _0x56ae('0x59'):_0x4b38d9('C701\x20port\x20UDP\x20bridge');_0x69aeb7[_0x56ae('0x22')]['connectC701'](_0x69aeb7['tcpHost'],{'port':_0x69aeb7['tcpPort'],'autoOpen':!![]})[_0x56ae('0x5a')](_0x69aeb7['setTCPConnectionOptions'])[_0x56ae('0x5a')](_0x69aeb7[_0x56ae('0x5b')])[_0x56ae('0x5c')](_0x69aeb7[_0x56ae('0x5d')]);break;case _0x56ae('0x5e'):_0x4b38d9(_0x56ae('0x5f'));_0x69aeb7['client'][_0x56ae('0x60')](_0x69aeb7['tcpHost'],{'port':_0x69aeb7[_0x56ae('0x9')],'autoOpen':!![]})[_0x56ae('0x5a')](_0x69aeb7[_0x56ae('0x61')])['catch'](_0x69aeb7[_0x56ae('0x5d')]);break;case _0x56ae('0x62'):_0x4b38d9(_0x56ae('0x63'));_0x69aeb7[_0x56ae('0x22')]['connectTcpRTUBuffered'](_0x69aeb7[_0x56ae('0x8')],{'port':_0x69aeb7[_0x56ae('0x9')],'autoOpen':!![]})['then'](_0x69aeb7[_0x56ae('0x61')])[_0x56ae('0x5c')](_0x69aeb7[_0x56ae('0x5d')]);break;default:_0x4b38d9(_0x56ae('0x64'));_0x69aeb7[_0x56ae('0x22')]['connectTCP'](_0x69aeb7[_0x56ae('0x8')],{'port':_0x69aeb7[_0x56ae('0x9')],'autoOpen':!![]})[_0x56ae('0x5a')](_0x69aeb7['setTCPConnectionOptions'])[_0x56ae('0x5c')](_0x69aeb7['modbusErrorHandling']);}}else{if(!_0x69aeb7['checkUnitId'](_0x69aeb7[_0x56ae('0x21')])){_0x69aeb7[_0x56ae('0x56')](_0x56ae('0x65'),{'payload':_0x69aeb7[_0x56ae('0x21')]});_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]();return;}if(!_0x69aeb7[_0x56ae('0x66')]){_0x69aeb7[_0x56ae('0x66')]=_0x948b6c;}switch(_0x69aeb7[_0x56ae('0xf')]){case _0x56ae('0x67'):_0x4b38d9(_0x56ae('0x68'));_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x69')](_0x69aeb7[_0x56ae('0x38')],{'baudRate':parseInt(_0x69aeb7[_0x56ae('0xb')]),'dataBits':parseInt(_0x69aeb7[_0x56ae('0xc')]),'stopBits':parseInt(_0x69aeb7[_0x56ae('0xd')]),'parity':_0x69aeb7[_0x56ae('0xe')],'autoOpen':![]})['then'](_0x69aeb7[_0x56ae('0x6a')])[_0x56ae('0x5c')](_0x69aeb7[_0x56ae('0x5d')]);break;case'RTU':_0x4b38d9(_0x56ae('0x6b'));_0x69aeb7[_0x56ae('0x22')]['connectRTUBuffered'](_0x69aeb7[_0x56ae('0x38')],{'baudRate':parseInt(_0x69aeb7[_0x56ae('0xb')]),'dataBits':parseInt(_0x69aeb7[_0x56ae('0xc')]),'stopBits':parseInt(_0x69aeb7[_0x56ae('0xd')]),'parity':_0x69aeb7[_0x56ae('0xe')],'autoOpen':![]})['then'](_0x69aeb7['setSerialConnectionOptions'])['catch'](_0x69aeb7[_0x56ae('0x5d')]);break;default:_0x4b38d9(_0x56ae('0x6b'));_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x6c')](_0x69aeb7[_0x56ae('0x38')],{'baudRate':parseInt(_0x69aeb7[_0x56ae('0xb')]),'dataBits':parseInt(_0x69aeb7[_0x56ae('0xc')]),'stopBits':parseInt(_0x69aeb7[_0x56ae('0xd')]),'parity':_0x69aeb7['serialParity'],'autoOpen':![]})[_0x56ae('0x5a')](_0x69aeb7[_0x56ae('0x6a')])[_0x56ae('0x5c')](_0x69aeb7['modbusErrorHandling']);break;}}};_0x69aeb7[_0x56ae('0x61')]=function(){_0x69aeb7['client'][_0x56ae('0x1f')](_0x69aeb7[_0x56ae('0x21')]);_0x69aeb7['client'][_0x56ae('0x6d')](_0x69aeb7[_0x56ae('0x11')]);_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x6e')]();};_0x69aeb7['setTCPConnected']=function(){_0x36c6a6[_0x56ae('0x6f')](_0x56ae('0x70')+_0x69aeb7[_0x56ae('0x8')]);};_0x69aeb7[_0x56ae('0x6a')]=function(){_0x69aeb7['statlyMachine'][_0x56ae('0x71')]();setTimeout(_0x69aeb7[_0x56ae('0x72')],parseInt(_0x69aeb7[_0x56ae('0x66')]));};_0x69aeb7[_0x56ae('0x5d')]=function(_0x4abc8f){_0x36c6a6[_0x56ae('0x6f')](_0x4abc8f[_0x56ae('0x73')]);var _0x30a4c7=_0x4abc8f[_0x56ae('0x73')];if(_0x30a4c7[_0x56ae('0x32')](_0x56ae('0x74'))!==-0x1||_0x30a4c7[_0x56ae('0x32')](_0x56ae('0x75'))!==-0x1){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x54')]();_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]();}if(_0x30a4c7[_0x56ae('0x32')](_0x56ae('0x76'))!==-0x1){_0x69aeb7['emit'](_0x56ae('0x51'),_0x56ae('0x77'));return;}if(_0x36c6a6[_0x56ae('0x78')]['includes'](_0x4abc8f[_0x56ae('0x79')])){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]();}};_0x69aeb7[_0x56ae('0x72')]=function(){if(_0x69aeb7['statlyMachine']['getMachineState']()===_0x56ae('0x7a')){_0x4b38d9(_0x56ae('0x7b')+_0x69aeb7['unit_id']);_0x36c6a6[_0x56ae('0x6f')]('modbus\x20connection\x20opened');_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x1f')](_0x69aeb7['unit_id']);_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x6d')](parseInt(_0x69aeb7[_0x56ae('0x11')]));_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x7c')]['on'](_0x56ae('0x54'),_0x69aeb7[_0x56ae('0x7d')]);_0x69aeb7['statlyMachine'][_0x56ae('0x6e')]();}else{_0x4b38d9(_0x56ae('0x7e')+_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x31')]());_0x36c6a6['modbusDebugLog'](_0x56ae('0x7f'),_0x69aeb7[_0x56ae('0x18')]['getMachineState']());_0x69aeb7[_0x56ae('0x18')]['failure']();}};_0x69aeb7[_0x56ae('0x7d')]=function(){_0x40d766(_0x56ae('0x80'));_0x36c6a6[_0x56ae('0x6f')](_0x56ae('0x80'));_0x69aeb7['statlyMachine']['close']();};_0x69aeb7[_0x56ae('0x81')]=function(_0x2b9c01){let _0x94dcf5=parseInt(_0x2b9c01['payload'][_0x56ae('0x1e')]);if(Number[_0x56ae('0x25')](_0x94dcf5)){return _0x69aeb7['bufferCommandList']['get'](_0x94dcf5)[_0x56ae('0x27')];}else{return _0x69aeb7['bufferCommandList']['get'](_0x69aeb7['unit_id'])[_0x56ae('0x27')];}};_0x69aeb7[_0x56ae('0x82')]=function(_0x9044fe,_0x3bfadf,_0x3c6dd6,_0x2600de){let _0x5a8854=parseInt(_0x3bfadf[_0x56ae('0x83')]['unitid']);if(Number[_0x56ae('0x25')](_0x5a8854)){_0x3bfadf[_0x56ae('0x84')]=_0x5a8854;_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0x85'),'msg':_0x3bfadf,'unit':_0x5a8854}));if(_0x69aeb7['unitSendingAllowed'][_0x56ae('0x32')](_0x5a8854)===-0x1){_0x69aeb7[_0x56ae('0x15')][_0x56ae('0x2b')](_0x5a8854);}_0x69aeb7['bufferCommandList'][_0x56ae('0x26')](_0x5a8854)[_0x56ae('0x2b')]({'callModbus':_0x9044fe,'msg':_0x3bfadf,'cb':_0x3c6dd6,'cberr':_0x2600de});}else{_0x3bfadf[_0x56ae('0x84')]=_0x69aeb7[_0x56ae('0x21')];_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0x86'),'msg':_0x3bfadf,'unit':_0x69aeb7[_0x56ae('0x21')]}));if(_0x69aeb7[_0x56ae('0x15')]['indexOf'](_0x69aeb7[_0x56ae('0x21')])===-0x1){_0x69aeb7[_0x56ae('0x15')]['push'](_0x69aeb7[_0x56ae('0x21')]);}_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x69aeb7['unit_id'])[_0x56ae('0x2b')]({'callModbus':_0x9044fe,'msg':_0x3bfadf,'cb':_0x3c6dd6,'cberr':_0x2600de});}};_0x69aeb7['on']('readModbus',function(_0x8c8fbe,_0x2b5148,_0x558a87){let _0x1f29bd=_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x31')]();if(_0x69aeb7[_0x56ae('0x16')][_0x56ae('0x32')](_0x1f29bd)===-0x1){_0x558a87('FSM\x20Not\x20Ready\x20To\x20Read',_0x8c8fbe);return;}if(_0x69aeb7[_0x56ae('0x6')]){_0x8c8fbe[_0x56ae('0x87')]=_0x69aeb7[_0x56ae('0x81')](_0x8c8fbe);_0x69aeb7[_0x56ae('0x82')](_0x69aeb7[_0x56ae('0x88')],_0x8c8fbe,_0x2b5148,_0x558a87);_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x4b')]();_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0x89'),'msg':_0x8c8fbe,'state':_0x1f29bd,'queueLength':_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x26')](_0x8c8fbe[_0x56ae('0x84')])[_0x56ae('0x27')]}));}else{_0x69aeb7['readModbus'](_0x8c8fbe,_0x2b5148,_0x558a87);}});_0x69aeb7[_0x56ae('0x88')]=function(_0x23e2bd,_0x12843d,_0x2ed526){if(!_0x69aeb7[_0x56ae('0x22')]){return;}if(!_0x69aeb7['bufferCommands']){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x8a')]();}_0x69aeb7['setUnitIdFromPayload'](_0x23e2bd);_0x69aeb7[_0x56ae('0x22')]['setTimeout'](_0x69aeb7[_0x56ae('0x11')]);_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0x8b'),'msg':_0x23e2bd,'unitid':_0x23e2bd[_0x56ae('0x20')],'timeout':_0x69aeb7['client'][_0x56ae('0x8c')](),'state':_0x69aeb7['statlyMachine'][_0x56ae('0x31')]()}));switch(parseInt(_0x23e2bd[_0x56ae('0x83')]['fc'])){case 0x1:_0x69aeb7['client'][_0x56ae('0x8d')](parseInt(_0x23e2bd[_0x56ae('0x83')][_0x56ae('0x8e')]),parseInt(_0x23e2bd['payload']['quantity']))[_0x56ae('0x5a')](function(_0x6ba2be){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x12843d(_0x6ba2be,_0x23e2bd);})[_0x56ae('0x5c')](function(_0x3f2f40){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x2ed526(_0x3f2f40,_0x23e2bd);_0x69aeb7[_0x56ae('0x5d')](_0x3f2f40);});break;case 0x2:_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x90')](parseInt(_0x23e2bd['payload'][_0x56ae('0x8e')]),parseInt(_0x23e2bd['payload'][_0x56ae('0x91')]))[_0x56ae('0x5a')](function(_0x34e745){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x12843d(_0x34e745,_0x23e2bd);})[_0x56ae('0x5c')](function(_0x4e7273){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x2ed526(_0x4e7273,_0x23e2bd);_0x69aeb7[_0x56ae('0x5d')](_0x4e7273);});break;case 0x3:_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x92')](parseInt(_0x23e2bd[_0x56ae('0x83')]['address']),parseInt(_0x23e2bd['payload'][_0x56ae('0x91')]))['then'](function(_0x25eae0){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x12843d(_0x25eae0,_0x23e2bd);})[_0x56ae('0x5c')](function(_0x16313e){_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x2ed526(_0x16313e,_0x23e2bd);_0x69aeb7[_0x56ae('0x5d')](_0x16313e);});break;case 0x4:_0x69aeb7['client']['readInputRegisters'](parseInt(_0x23e2bd[_0x56ae('0x83')]['address']),parseInt(_0x23e2bd[_0x56ae('0x83')]['quantity']))[_0x56ae('0x5a')](function(_0x564db2){_0x69aeb7['activateSending'](_0x23e2bd);_0x12843d(_0x564db2,_0x23e2bd);})[_0x56ae('0x5c')](function(_0xb8db59){_0x69aeb7['activateSending'](_0x23e2bd);_0x2ed526(_0xb8db59,_0x23e2bd);_0x69aeb7[_0x56ae('0x5d')](_0xb8db59);});break;default:_0x69aeb7[_0x56ae('0x8f')](_0x23e2bd);_0x2ed526(_0x56ae('0x93'),_0x23e2bd);_0x36c6a6[_0x56ae('0x6f')](_0x56ae('0x94'),JSON['stringify'](_0x23e2bd));break;}};_0x69aeb7['on']('writeModbus',function(_0x16449b,_0x22286c,_0x41c8cd){let _0x24beb6=_0x69aeb7[_0x56ae('0x18')]['getMachineState']();if(_0x69aeb7[_0x56ae('0x16')][_0x56ae('0x32')](_0x24beb6)===-0x1){_0x41c8cd('FSM\x20Not\x20Ready\x20To\x20Write',_0x16449b);return;}if(_0x69aeb7[_0x56ae('0x6')]){_0x16449b[_0x56ae('0x87')]=_0x69aeb7[_0x56ae('0x81')](_0x16449b);_0x69aeb7[_0x56ae('0x82')](_0x69aeb7[_0x56ae('0x95')],_0x16449b,_0x22286c,_0x41c8cd);_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x4b')]();_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0x96'),'msg':_0x16449b,'state':_0x24beb6,'queueLength':_0x69aeb7[_0x56ae('0x13')]['get'](_0x16449b[_0x56ae('0x84')])[_0x56ae('0x27')]}));}else{_0x69aeb7[_0x56ae('0x95')](_0x16449b,_0x22286c,_0x41c8cd);}});_0x69aeb7[_0x56ae('0x95')]=function(_0x1d0b02,_0x547e37,_0x500868){if(!_0x69aeb7[_0x56ae('0x22')]){return;}if(!_0x69aeb7[_0x56ae('0x6')]){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x97')]();}_0x69aeb7[_0x56ae('0x98')](_0x1d0b02);_0x69aeb7['client'][_0x56ae('0x6d')](_0x69aeb7[_0x56ae('0x11')]);_0x316c8f(JSON[_0x56ae('0x28')]({'info':'write\x20msg','msg':_0x1d0b02,'unitid':_0x1d0b02[_0x56ae('0x20')],'timeout':_0x69aeb7['client'][_0x56ae('0x8c')](),'state':_0x69aeb7['statlyMachine'][_0x56ae('0x31')]()}));switch(parseInt(_0x1d0b02[_0x56ae('0x83')]['fc'])){case 0xf:if(parseInt(_0x1d0b02[_0x56ae('0x83')]['value'][_0x56ae('0x27')])!==parseInt(_0x1d0b02['payload'][_0x56ae('0x91')])){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868(_0x56ae('0x99')+_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x9a')][_0x56ae('0x27')]+_0x56ae('0x9b')+_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x8e')]+_0x56ae('0x9c')+_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x91')],_0x1d0b02);}else{_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x9d')](parseInt(_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x8e')]),_0x1d0b02['payload']['value'])[_0x56ae('0x5a')](function(_0x5c4be0){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x547e37(_0x5c4be0,_0x1d0b02);})[_0x56ae('0x5c')](function(_0x5d6b69){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868(_0x5d6b69,_0x1d0b02);_0x69aeb7[_0x56ae('0x5d')](_0x5d6b69);});}break;case 0x5:_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x9e')](parseInt(_0x1d0b02['payload'][_0x56ae('0x8e')]),_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x9a')]===!![])[_0x56ae('0x5a')](function(_0x5d0e1f){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x547e37(_0x5d0e1f,_0x1d0b02);})[_0x56ae('0x5c')](function(_0x2b7092){_0x69aeb7['activateSending'](_0x1d0b02);_0x500868(_0x2b7092,_0x1d0b02);_0x69aeb7[_0x56ae('0x5d')](_0x2b7092);});break;case 0x10:if(parseInt(_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x9a')]['length'])!==parseInt(_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x91')])){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868(_0x56ae('0x9f')+_0x1d0b02[_0x56ae('0x83')]['value'][_0x56ae('0x27')]+_0x56ae('0x9b')+_0x1d0b02['payload'][_0x56ae('0x8e')]+_0x56ae('0x9c')+_0x1d0b02[_0x56ae('0x83')]['quantity'],_0x1d0b02);}else{_0x69aeb7['client']['writeRegisters'](parseInt(_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x8e')]),_0x1d0b02['payload'][_0x56ae('0x9a')])[_0x56ae('0x5a')](function(_0x2a8d55){_0x69aeb7['activateSending'](_0x1d0b02);_0x547e37(_0x2a8d55,_0x1d0b02);})[_0x56ae('0x5c')](function(_0x30e037){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868(_0x30e037,_0x1d0b02);_0x69aeb7[_0x56ae('0x5d')](_0x30e037);});}break;case 0x6:_0x69aeb7[_0x56ae('0x22')][_0x56ae('0xa0')](parseInt(_0x1d0b02[_0x56ae('0x83')][_0x56ae('0x8e')]),parseInt(_0x1d0b02[_0x56ae('0x83')]['value']))[_0x56ae('0x5a')](function(_0x5526a7){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x547e37(_0x5526a7,_0x1d0b02);})[_0x56ae('0x5c')](function(_0x2097d8){_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868(_0x2097d8,_0x1d0b02);_0x69aeb7[_0x56ae('0x5d')](_0x2097d8);});break;default:_0x69aeb7[_0x56ae('0x8f')](_0x1d0b02);_0x500868('Function\x20Code\x20Unknown',_0x1d0b02);_0x36c6a6[_0x56ae('0x6f')](_0x56ae('0x94'),JSON[_0x56ae('0x28')](_0x1d0b02));break;}};_0x69aeb7[_0x56ae('0x8f')]=function(_0x51aa2f){if(_0x69aeb7[_0x56ae('0x6')]){_0x69aeb7[_0x56ae('0x14')][_0x56ae('0x1b')](_0x51aa2f[_0x56ae('0x84')],!![]);_0x316c8f(JSON[_0x56ae('0x28')]({'info':_0x56ae('0xa1'),'msg':_0x51aa2f,'queueLength':_0x69aeb7[_0x56ae('0x13')][_0x56ae('0x27')]}));}_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x49')]();};_0x4b38d9('initialized');_0x69aeb7[_0x56ae('0xa2')](_0x558098);_0x69aeb7[_0x56ae('0x18')][_0x56ae('0xa3')]();_0x69aeb7['on'](_0x56ae('0xa4'),function(){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]()[_0x56ae('0x54')]();});_0x69aeb7['on'](_0x56ae('0x54'),function(_0x566b90){_0x69aeb7[_0x56ae('0x18')][_0x56ae('0x58')]()[_0x56ae('0xa5')]();_0x4b38d9('close\x20node');if(_0x69aeb7[_0x56ae('0x22')]){_0x69aeb7[_0x56ae('0x22')][_0x56ae('0x54')](function(){_0x4b38d9(_0x56ae('0x55'));_0x566b90();})[_0x56ae('0x5c')](function(_0x1ba457){_0x4b38d9(_0x1ba457);_0x566b90();});}else{_0x566b90();}});}_0x34a12b[_0x56ae('0x2')][_0x56ae('0xa6')](_0x56ae('0xa7'),_0x3e4c21);_0x34a12b[_0x56ae('0xa8')]['get'](_0x56ae('0xa9'),_0x34a12b[_0x56ae('0xaa')][_0x56ae('0xab')](_0x56ae('0xac')),function(_0x2b624e,_0x3942fd){let _0x5cb48d=require(_0x56ae('0xad'));_0x5cb48d['list'](function(_0x5bd139,_0x573df6){if(_0x5bd139)console[_0x56ae('0xae')](_0x5bd139);_0x3942fd[_0x56ae('0xaf')](_0x573df6);});});};