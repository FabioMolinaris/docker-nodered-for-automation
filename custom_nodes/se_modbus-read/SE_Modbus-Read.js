var _0xacdd=['mbconnected','mbactive','mberror','mbclosed','modbusPollingRead','client','emit','readModbus','onModbusReadError','functionCodeModbus','Coil','Input','HoldingRegister','log','logInfo','data','closed','parse','type','float32','tag','address','boolean','Register','polling','set_node_status_properties','showStatusActivities','search','active','status','fill','shape','get_timeUnit_name','message','Timed\x20out','FSM\x20Not\x20Ready\x20To\x20Read','reconnect','Device\x20is\x20not\x20connected','Modbus\x20exception\x201','Illegal\x20Function\x20Function','Modbus\x20exception\x202','Illegal\x20Data\x20Address','Modbus\x20exception\x203','Illegal\x20Data\x20Value','Port\x20Not\x20Open','uintToInt\x20only\x20supports\x20ints\x20up\x20to\x2032\x20bits','setInt16','getFloat32','reverse','registerType','SE_Modbus-Read','../src/modbus-basics','nodes','createNode','name','unitid','dataType','adr','quantity','alltags','rate','rateUnit','logging','loggingLevel','size','sizeUnit','getNode','server','clienttype','tcp','toUpperCase','tcpHost','Modbus','configError','connecting','serial','Calling\x20modbus\x20INIT\x20state','payload','send','onModbusConnect','calc_rateByUnit','Slave\x20ID\x20is\x20not\x20configured','logError','NODE\x20Name::','NODE\x20ID::','::Slave\x20ID\x20is\x20not\x20configured','onModbusActive','onModbusError','FSM\x20Reset\x20On\x20State\x20INIT','FSM\x20Reset\x20On\x20State\x20QUEUEING','disconnected','COM\x20Port\x20in\x20use','COM\x20Port\x20is\x20already\x20opened','error','Read\x20Error','onModbusClose','::closed','mbinit'];(function(_0x110c21,_0xc1931b){var _0x443451=function(_0x282337){while(--_0x282337){_0x110c21['push'](_0x110c21['shift']());}};_0x443451(++_0xc1931b);}(_0xacdd,0x95));var _0x4327=function(_0x1892df,_0x432a20){_0x1892df=_0x1892df-0x0;var _0x3f5739=_0xacdd[_0x1892df];return _0x3f5739;};module['exports']=function(_0x4ef607){'use strict';let _0xf2769=require(_0x4327('0x0'));var _0x2d3341=new Object();let _0x551a8f={};function _0x22da58(_0x496235){_0x4ef607[_0x4327('0x1')][_0x4327('0x2')](this,_0x496235);this[_0x4327('0x3')]=_0x496235[_0x4327('0x3')];this[_0x4327('0x4')]=_0x496235[_0x4327('0x4')];this['dataType']=_0x496235[_0x4327('0x5')];this[_0x4327('0x6')]=_0x496235[_0x4327('0x6')];this[_0x4327('0x7')]=_0x496235[_0x4327('0x7')];this[_0x4327('0x8')]=_0x496235[_0x4327('0x8')];this[_0x4327('0x9')]=_0x496235['rate'];this[_0x4327('0xa')]=_0x496235['rateUnit'];this[_0x4327('0xb')]=_0x496235[_0x4327('0xb')];this[_0x4327('0xc')]=_0x496235[_0x4327('0xc')];this[_0x4327('0xd')]=0x5;this[_0x4327('0xe')]='mb';let _0xdbb89d=this;let _0x2cffa6=_0x4ef607[_0x4327('0x1')][_0x4327('0xf')](_0x496235[_0x4327('0x10')]);let _0xe0ee77=null;let _0x2d840c=![];let _0x1c962e=require('../src/logging');let _0x4943c7='';if(_0x2cffa6[_0x4327('0x11')]==_0x4327('0x12')){_0x4943c7=_0x2cffa6[_0x4327('0x3')]+''+_0x2cffa6[_0x4327('0x11')][_0x4327('0x13')]()+'@'+_0x2cffa6[_0x4327('0x14')];}else{_0x4943c7=_0x2cffa6[_0x4327('0x3')]+''+_0x2cffa6[_0x4327('0x11')][_0x4327('0x13')]()+'@'+_0xdbb89d[_0x4327('0x4')];}if(_0xdbb89d[_0x4327('0xb')]==='1')_0xdbb89d[_0x4327('0xb')]=!![];else _0xdbb89d['logging']=![];_0x1c962e['configure'](_0xdbb89d[_0x4327('0xb')],_0x4327('0x15'),__dirname,_0xdbb89d[_0x4327('0xd')],_0xdbb89d[_0x4327('0xe')],_0xdbb89d[_0x4327('0xc')]);if(_0x496235['adr']===''||_0xdbb89d[_0x4327('0x7')]===''||_0x2cffa6===null){_0x295c2a(_0x4327('0x16'));return;}else{_0x295c2a(_0x4327('0x17'));}if(_0x2cffa6[_0x4327('0x11')]===_0x4327('0x18')){if(_0xdbb89d['unitid']===''){_0xdbb89d[_0x4327('0x4')]=![];_0x295c2a(_0x4327('0x16'));}}else{if(_0xdbb89d['unitid']===''){_0xdbb89d[_0x4327('0x4')]=!![];}}_0xdbb89d['onModbusInit']=function(){_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x19')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);};_0xdbb89d[_0x4327('0x1c')]=function(){if(_0xdbb89d[_0x4327('0x4')]!=![]){if(!_0xe0ee77){_0xe0ee77=setInterval(_0xdbb89d['modbusPollingRead'],_0xf2769[_0x4327('0x1d')](_0xdbb89d[_0x4327('0x9')],_0xdbb89d[_0x4327('0xa')]));}_0x295c2a('connected');_0x1c962e['logInfo']('NODE\x20Name::'+_0xdbb89d[_0x4327('0x3')]+':'+'NODE\x20ID::'+_0xdbb89d['id']+'::connected',_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);}else{_0x2d3341[_0x4327('0x1a')]=_0x4327('0x1e');_0x1c962e[_0x4327('0x1f')](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+_0x4327('0x22'),_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0xdbb89d[_0x4327('0x1b')](_0x2d3341);}};_0xdbb89d[_0x4327('0x23')]=function(){};_0xdbb89d[_0x4327('0x24')]=function(_0x3b7573){_0x1c962e['debugMessage'](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+'NODE\x20ID::'+_0xdbb89d['id']+'::'+_0x3b7573,_0xdbb89d['logging'],_0xdbb89d[_0x4327('0xc')]);_0x1c962e[_0x4327('0x1f')](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+'NODE\x20ID::'+_0xdbb89d['id']+'::Device\x20is\x20not\x20connected',_0xdbb89d[_0x4327('0xb')],_0xdbb89d['loggingLevel']);if(_0xe0ee77){clearInterval(_0xe0ee77);}_0xe0ee77=null;if(_0x3b7573==_0x4327('0x25')||_0x3b7573==_0x4327('0x26')){_0x295c2a(_0x4327('0x27'));_0x551a8f={'name':_0xdbb89d['name'],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':'Device\x20is\x20not\x20connected'}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);}else if(_0x3b7573==_0x4327('0x28')){_0x295c2a('error');_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x29')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);}else{_0x295c2a(_0x4327('0x2a'));_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x2b')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);}};_0xdbb89d[_0x4327('0x2c')]=function(){_0x295c2a('closed');_0x1c962e['logInfo']('NODE\x20Name::'+_0xdbb89d['name']+':'+_0x4327('0x21')+_0xdbb89d['id']+_0x4327('0x2d'),_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);if(_0xe0ee77){clearInterval(_0xe0ee77);}_0xe0ee77=null;};_0x2cffa6['on'](_0x4327('0x2e'),_0xdbb89d['onModbusInit']);_0x2cffa6['on'](_0x4327('0x2f'),_0xdbb89d[_0x4327('0x1c')]);_0x2cffa6['on'](_0x4327('0x30'),_0xdbb89d['onModbusActive']);_0x2cffa6['on'](_0x4327('0x31'),_0xdbb89d[_0x4327('0x24')]);_0x2cffa6['on'](_0x4327('0x32'),_0xdbb89d['onModbusClose']);_0xdbb89d[_0x4327('0x33')]=function(){if(!_0x2cffa6[_0x4327('0x34')]){_0x295c2a(_0x4327('0x17'));return;}let _0x11cf22={'topic':'polling','from':_0xdbb89d[_0x4327('0x3')],'payload':{'unitid':_0xdbb89d[_0x4327('0x4')],'fc':_0xdbb89d['functionCodeModbus'](_0xdbb89d['dataType']),'address':_0xdbb89d[_0x4327('0x6')],'quantity':_0xdbb89d['quantity']}};_0x2cffa6[_0x4327('0x35')](_0x4327('0x36'),_0x11cf22,_0xdbb89d['onModbusReadDone'],_0xdbb89d[_0x4327('0x37')]);};_0xdbb89d[_0x4327('0x38')]=function(_0xc5e5db){switch(_0xc5e5db){case _0x4327('0x39'):return 0x1;case _0x4327('0x3a'):return 0x2;case _0x4327('0x3b'):return 0x3;case'InputRegister':return 0x4;default:return _0xc5e5db;}};_0xdbb89d['onModbusReadDone']=function(_0x4deed6,_0x5f378d){console[_0x4327('0x3c')](_0x4deed6);_0x1c962e[_0x4327('0x3d')]('NODE\x20Name::'+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+'::Read\x20Data\x20Successfully',_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0xdbb89d['send'](_0xffb362(_0x4deed6[_0x4327('0x3e')],_0x4deed6,_0xdbb89d[_0x4327('0x7')],_0xdbb89d[_0x4327('0x8')]));};_0xdbb89d[_0x4327('0x37')]=function(_0x19624d,_0x1c2ecc){_0x2ee396(_0x19624d,_0x1c2ecc);};_0xdbb89d['on']('close',function(){if(_0xe0ee77){clearInterval(_0xe0ee77);}_0xe0ee77=null;_0x295c2a(_0x4327('0x3f'));});function _0xffb362(_0x16684c,_0x3a4ce5,_0x44721b,_0x4e5266){console[_0x4327('0x3c')](_0x16684c);let _0x3fe6ef=JSON[_0x4327('0x40')](_0x4e5266);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'data':{}};let _0xbacb26=_0x3fe6ef['length'];for(let _0x334a0d=0x0;_0x334a0d<_0xbacb26;_0x334a0d++){let _0x5c614c;let _0x936f05=_0xf05ea5(_0x16684c[_0x334a0d],0x10);if(_0x3fe6ef[_0x334a0d][_0x4327('0x41')]==_0x4327('0x42')){console[_0x4327('0x3c')](_0x16684c[_0x334a0d],_0x16684c[_0x334a0d+0x1]);let _0x258170=_0x485438(_0x16684c[_0x334a0d],_0x16684c[_0x334a0d+0x1]);if(_0x3fe6ef[_0x334a0d][_0x4327('0x43')]!=''){_0x551a8f[_0x4327('0x3e')][_0x3fe6ef[_0x334a0d]['tag']]={'value':_0x258170,'type':_0x3fe6ef[_0x334a0d][_0x4327('0x41')]};}else{_0x551a8f[_0x4327('0x3e')][_0x3fe6ef[_0x334a0d][_0x4327('0x44')]]={'value':_0x258170};}_0x5c614c='Register'+_0x3fe6ef[_0x334a0d]['address']+':\x20'+_0x258170;_0x1c962e['logInfo'](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+'::'+_0x5c614c,_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0x334a0d++;}else if(_0x3fe6ef[_0x334a0d][_0x4327('0x41')]==_0x4327('0x45')){let _0x258450=!![];if(_0x936f05===0x1){_0x258450=!![];}else{_0x258450=![];}if(_0x3fe6ef[_0x334a0d][_0x4327('0x43')]!=''){_0x551a8f[_0x4327('0x3e')][_0x3fe6ef[_0x334a0d][_0x4327('0x43')]]={'value':_0x258450,'type':_0x3fe6ef[_0x334a0d]['type']};}else{_0x551a8f[_0x4327('0x3e')][_0x3fe6ef[_0x334a0d][_0x4327('0x44')]]={'value':_0x258450};}}else{if(_0x3fe6ef[_0x334a0d]['tag']!=''){_0x551a8f[_0x4327('0x3e')][_0x3fe6ef[_0x334a0d][_0x4327('0x43')]]={'value':_0x936f05,'type':_0x3fe6ef[_0x334a0d][_0x4327('0x41')]};}else{_0x551a8f['data'][_0x3fe6ef[_0x334a0d][_0x4327('0x44')]]={'value':_0x936f05};}_0x5c614c=_0x4327('0x46')+_0x3fe6ef[_0x334a0d][_0x4327('0x44')]+':\x20'+_0x936f05;_0x1c962e[_0x4327('0x3d')](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+'::'+_0x5c614c,_0xdbb89d[_0x4327('0xb')],_0xdbb89d['loggingLevel']);}}return[{'payload':_0x551a8f}];}function _0x295c2a(_0x41beb9){if(_0x41beb9===_0x4327('0x47')&&_0x2d840c){return;}let _0x2b841b=_0xf2769[_0x4327('0x48')](_0x41beb9,_0xdbb89d[_0x4327('0x49')]);if(_0x41beb9[_0x4327('0x4a')](_0x4327('0x4b'))!==-0x1||_0x41beb9===_0x4327('0x47')){_0x2d840c=![];_0xdbb89d[_0x4327('0x4c')]({'fill':_0x2b841b[_0x4327('0x4d')],'shape':_0x2b841b[_0x4327('0x4e')],'text':_0x2b841b[_0x4327('0x4c')]+_0x330b62()});}else{_0xdbb89d[_0x4327('0x4c')]({'fill':_0x2b841b['fill'],'shape':_0x2b841b[_0x4327('0x4e')],'text':_0x2b841b[_0x4327('0x4c')]});}}function _0x330b62(){return'\x20(\x20'+_0xdbb89d[_0x4327('0x9')]+'\x20'+_0xf2769[_0x4327('0x4f')](_0xdbb89d['rateUnit'])+'\x20)\x20';}function _0x2ee396(_0x29b7d6,_0x9215a3){let _0x2d9afe=![];if(_0x29b7d6){switch(_0x29b7d6[_0x4327('0x50')]){case _0x4327('0x51'):_0x2d840c=!![];_0x2d9afe=!![];break;case _0x4327('0x52'):_0x2d9afe=!![];break;case'Port\x20Not\x20Open':_0x2cffa6[_0x4327('0x35')](_0x4327('0x53'));_0x2d9afe=!![];_0x295c2a('disconnected');_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x54')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d['send'](_0x2d3341);return;default:}}_0x340be9(_0x29b7d6,_0x9215a3);return _0x2d9afe;}function _0x340be9(_0x32ed0c,_0x451b41){switch(_0x32ed0c['msg']){case _0x4327('0x55'):_0x295c2a(_0x4327('0x2a'));_0x1c962e[_0x4327('0x1f')](_0x4327('0x20')+_0xdbb89d['name']+':'+'NODE\x20ID::'+_0xdbb89d['id']+'::'+_0x4327('0x56'),_0xdbb89d['logging']);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x56')}};_0x2d3341['payload']=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);break;case _0x4327('0x57'):_0x295c2a(_0x4327('0x2a'));_0x1c962e['logError'](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+'::'+_0x4327('0x58'),_0xdbb89d[_0x4327('0xb')],_0xdbb89d['loggingLevel']);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x58')}};_0x2d3341['payload']=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);break;case _0x4327('0x59'):_0x295c2a('error');_0x1c962e['logError'](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+_0x4327('0x21')+_0xdbb89d['id']+'::'+'Illegal\x20Data\x20Value',_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x5a')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);break;case'Modbus\x20exception\x204':_0x295c2a('error');_0x1c962e['logError'](_0x4327('0x20')+_0xdbb89d[_0x4327('0x3')]+':'+'NODE\x20ID::'+_0xdbb89d['id']+'::'+'Slave\x20Device\x20Failure',_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':'Slave\x20Device\x20Failure'}};_0x2d3341['payload']=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);break;case _0x4327('0x51'):case _0x4327('0x5b'):_0x295c2a(_0x4327('0x27'));_0x551a8f={'name':_0xdbb89d['name'],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':_0x4327('0x54')}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);break;default:_0x295c2a(_0x4327('0x2a'));_0x1c962e['logError'](_0x4327('0x20')+_0xdbb89d['name']+':'+_0x4327('0x21')+_0xdbb89d['id']+'::'+_0x4327('0x2b'),_0xdbb89d[_0x4327('0xb')],_0xdbb89d[_0x4327('0xc')]);_0x551a8f={'name':_0xdbb89d[_0x4327('0x3')],'id':_0x4943c7,'timestamp':new Date(),'error':{'msg':'Read\x20Error\x20'+_0x32ed0c}};_0x2d3341[_0x4327('0x1a')]=_0x551a8f;_0xdbb89d[_0x4327('0x1b')](_0x2d3341);}}function _0xf05ea5(_0x2a8bfe,_0x4f0f65){_0x4f0f65=+_0x4f0f65||0x20;if(_0x4f0f65>0x20)throw new RangeError(_0x4327('0x5c'));_0x2a8bfe<<=0x20-_0x4f0f65;_0x2a8bfe>>=0x20-_0x4f0f65;return _0x2a8bfe;}function _0x485438(_0x13c722,_0x5975de){let _0x244504=new ArrayBuffer(0x4);let _0x1787ca=new DataView(_0x244504);_0x1787ca['setInt16'](0x0,_0x13c722,![]);_0x1787ca[_0x4327('0x5d')](0x2,_0x5975de,![]);return _0x1787ca[_0x4327('0x5e')](0x0,![]);}function _0x2b7471(_0x236e35){return _0x236e35[_0x4327('0x5f')]();}}_0x4ef607[_0x4327('0x1')][_0x4327('0x60')](_0x4327('0x61'),_0x22da58);};